<!DOCTYPE html>
<html>
<head>
    <title>Georgia Home Price Prediction</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="app.js"></script>
	<link rel="stylesheet" href="app.css">
</head>
<body>
<div class="img"></div>
<form class="form">
    <h2>Price Per Square Feet</h2>
    <input class="area" type="text" id="uiSqft" class="floatLabel" name="Squareft" value="1000">
    <h2>Year Built</h2>
    <input class="area" type="text" id="uiyrbuilt" class="floatLabel" name="yearBuilt" value="2005">
    <h2>Living Area Value (acre)</h2>
    <input class="area" type="text" id="uilivingarea" class="floatLabel" name="livingAreaValue" value="8000">
	<h2>Building Area</h2>
    <input class="area"  type="text" id="uibuildingarea" class="floatLabel" name="buildingArea" value="1800">
	<h2>Bathrooms</h2>
    <input class="area"  type="text" id="uibathrooms" class="floatLabel" name="buildingArea" value="2">
	<h2>Bedrooms</h2>
    <input class="area"  type="text" id="uibedrooms" class="floatLabel" name="buildingArea" value="3">
	<form class="form">
	<h2>Have Parking?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-parking-1" name="uiparking" value="1"/>
		<label for="radio-parking-1">Yes</label>
		<input type="radio" id="radio-parking-2" name="uiparking" value="0" checked/>
		<label for="radio-parking-2">No</label>
	</div>
</form>

<form class="form">
	<h2>Is New Constructed?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-construction-1" name="uiconstruction" value="1"/>
		<label for="radio-construction-1">Yes</label>
		<input type="radio" id="radio-construction-2" name="uiconstruction" value="0" checked/>
		<label for="radio-construction-2">No</label>
	</div>
</form>

<form class="form">
	<h2>Have Pool?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-pool-1" name="uipool" value="1"/>
		<label for="radio-pool-1">Yes</label>
		<input type="radio" id="radio-pool-2" name="uipool" value="0" checked/>
		<label for="radio-pool-2">No</label>
	</div>
</form>

<form class="form">
	<h2>Have Garage Spaces?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-garagespc-1" name="uigaragespc" value="1"/>
		<label for="radio-garagespc-1">Yes</label>
		<input type="radio" id="radio-garagespc-2" name="uigaragespc" value="0" checked/>
		<label for="radio-garagespc-2">No</label>
	</div>
</form>

<form class="form">
	<h2>Have Garage?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-garage-1" name="uigarage" value="1"/>
		<label for="radio-garage-1">Yes</label>
		<input type="radio" id="radio-garage-2" name="uigarage" value="0" checked/>
		<label for="radio-garage-2">No</label>
	</div>
</form>

<form class="form">
	<h2>Have Spa?</h2>
	<div class="switch-field">
		<input type="radio" id="radio-spa-1" name="uispa" value="1"/>
		<label for="radio-spa-1">Yes</label>
		<input type="radio" id="radio-spa-2" name="uispa" value="0" checked/>
		<label for="radio-spa-2">No</label>
	</div>
</form>


<div class="form">
    <h2>City</h2>
    <div>
        <select class="location" name="uicity" id="uicity">
            <option value="" disabled="disabled" selected="selected">Choose a City</option>
            <option>Electronic City</option>
            <option>Rajaji Nagar</option>
        </select>
    </div>
    
    <h2>County</h2>
    <div>
        <select class="location" name="county" id="uicounty">
            <option value="" disabled="disabled" selected="selected">Choose a county</option>
            <option>Electronic City</option>
            <option>Rajaji Nagar</option>
        </select>
    </div>

    <h2>Home Type</h2>
    <div>
        <select class="location" name="hometype" id="uihometype">
            <option value="" disabled="disabled" selected="selected">Choose a Home Type</option>
            <option>Electronic City</option>
            <option>Rajaji Nagar</option>
        </select>
    </div>

    <h2>Levels</h2>
    <div>
        <select class="location" name="levels" id="uilevels">
            <option value="" disabled="disabled" selected="selected">Choose a level</option>
            <option>Electronic City</option>
            <option>Rajaji Nagar</option>
        </select>
    </div>
</div>

<div class="form">
	<button class="submit" onclick= "onClickedEstimatePrice()"id="onClickButton" type="button">-Click Here to Estimate Price-</button>
	<div id="uiEstimatedPrice" class="result">	<h2></h2> </div>
	
<script>
	function getParkingValue() {
        var uiparking = document.getElementsByName("uiparking");
        for (var i = 0; i < uiparking.length; i++) {
          if (uiparking[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    
    function getGarageValue() {
        var uigarage = document.getElementsByName("uigarage");
        for (var i = 0; i < uigarage.length; i++) {
          if (uigarage[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    
    function getGarageSpcValue() {
        var uigaragespc = document.getElementsByName("uigaragespc");
        for (var i = 0; i < uigaragespc.length; i++) {
          if (uigaragespc[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    
    function getPoolValue() {
        var uipool = document.getElementsByName("uipool");
        for (var i = 0; i < uipool.length; i++) {
          if (uipool[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    
    function getSpaValue() {
        var uispa = document.getElementsByName("uispa");
        for (var i = 0; i < uispa.length; i++) {
          if (uispa[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    
    function getConstructionValue() {
        var uiconstruction = document.getElementsByName("uiconstruction");
        for (var i = 0; i < uiconstruction.length; i++) {
          if (uiconstruction[i].checked) {
            return parseInt(i) + 1;
          }
        }
        return -1; // Invalid Value
      }
    function onClickedEstimatePrice() {
        console.log("Estimate price button clicked");
    
        // Get input values
        var sqft = parseFloat(document.getElementById("uiSqft").value);
        var yearbuilt = parseInt(document.getElementById("uiyrbuilt").value);
        var livingareavalue = parseFloat(document.getElementById("uilivingarea").value);
        var buildingarea = parseFloat(document.getElementById("uibuildingarea").value);
        var bathrooms = parseInt(document.getElementById("uibathrooms").value);
        var bedrooms = parseInt(document.getElementById("uibedrooms").value);
    
        // Get radio button values
        var parking = getParkingValue();
        var spa = getSpaValue();
        var garagespc = getGarageSpcValue();
        var garage = getGarageValue();
        var pool = getPoolValue();
        var construction = getConstructionValue();
    
        // Get dropdown values
        var city = document.getElementById("uicity").value;
        var county = document.getElementById("uicounty").value;
        var levels = document.getElementById("uilevels").value;
        var hometype = document.getElementById("uihometype").value;
    
        var estPrice = document.getElementById("uiEstimatedPrice");
    
        // Make sure all required values are valid
        if (isNaN(sqft) || isNaN(yearbuilt) || isNaN(livingareavalue) || isNaN(buildingarea) ||
            isNaN(bathrooms) || isNaN(bedrooms) || isNaN(parking) || isNaN(spa) || isNaN(garagespc) ||
            isNaN(garage) || isNaN(pool) || isNaN(construction) || city === "" || county === "" ||
            levels === "" || hometype === "") {
            console.error("Invalid input. Please fill in all required fields with valid numbers.");
            return;
        }
    
        var url = "http://127.0.0.1:5000/predict_home_price";
    
        $.post(url, {
            pricePerSquareFoot: sqft,
            yearBuilt: yearbuilt,
            livingAreaValue: livingareavalue,
            buildingArea: buildingarea,
            bedrooms: bedrooms,
            bathrooms: bathrooms,
            parking: parking,
            pool: pool,
            spa: spa,
            hasGarage: garage,
            isNewConstruction: construction,
            garageSpaces: garagespc,
            city: city,
            county: county,
            homeType: hometype,
            levels: levels
        })
        .done(function(data, status) {
            console.log(data.estimated_price);
            estPrice.innerHTML = "<h2>" + data.estimated_price.toString() + "</h2>";
            console.log(status);
        })
        .fail(function(jqXHR, textStatus, errorThrown) {
            console.error("AJAX request failed:", textStatus, errorThrown);
            // Handle the failure, e.g., show an error message to the user
        });
    }
</script>
</div>
</body>
</html>